---
title: Form Filling
description: Enhance and Automate Interactions Between Form Filling and Local File Systems
---

import { EditableCodeBlock, EditableValue, S } from '@/components/editable-code-block';
import { Tab, Tabs } from 'fumadocs-ui/components/tabs';

## Overview

Cua can be used to automate interactions between form filling and local file systems over any operating system. Cua let's you interact with all the elements of a web page and local file systems to integrate between the two.

This preset usecase uses [Cua Computer](/computer-sdk/computers) to interact with a web page and local file systems along with [Agent Loops](/agent-sdk/agent-loops) to run the agent in a loop with message history.

## Quickstart

Create a `requirements.txt` file with the following dependencies:

```text
cua-agent
cua-computer
python-dotenv>=1.0.0
```

And install:

```bash
pip install -r requirements.txt
```

Create a `.env` file with the following environment variables:

```text
ANTHROPIC_API_KEY=your-api-key
CUA_API_KEY=sk_cua-api01...
```

Select the environment you want to run the code in (_click on the underlined values in the code to edit them directly!_):

<Tabs items={['☁️ Cloud', '🐳 Docker', '🍎 Lume', '🪟 Windows Sandbox']}>
  <Tab value="☁️ Cloud">

<EditableCodeBlock
  key="cloud-tab"
  lang="python"
  defaultValues={{
    "container-name": "m-linux-...",
    "api_key": "sk_cua-api01..."
  }}
>
{`import asyncio
import logging
import os
import signal
import traceback

from agent import ComputerAgent
from computer import Computer, VMProviderType
from dotenv import load_dotenv

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(**name**)

def handle_sigint(sig, frame):
print("\\n\\nExecution interrupted by user. Exiting gracefully...")
exit(0)

async def fill_application():
try:
async with Computer(
os_type="linux",
provider_type=VMProviderType.CLOUD,
name="`}<EditableValue placeholder="container-name" />{`",
api_key="`}<EditableValue placeholder="api_key" />{`",
verbosity=logging.INFO,
) as computer:

            agent = ComputerAgent(
                model="anthropic/claude-3-5-sonnet-20241022",
                tools=[computer],
                only_n_most_recent_images=3,
                verbosity=logging.INFO,
                trajectory_dir="trajectories",
                use_prompt_caching=True,
                max_trajectory_budget=5.0,
            )

            tasks = [
                "Visit https://www.overleaf.com/latex/templates/jakes-resume/syzfjbzwjncs.pdf and download the pdf.",
                "Visit https://form.jotform.com/252881246782264 and fill the form from the information in the pdf."
            ]

            history = []

            for i, task in enumerate(tasks, 1):
                print(f"\\n[Task {i}/{len(tasks)}] {task}")

                # Add user message to history
                history.append({"role": "user", "content": task})

                # Run agent with conversation history
                async for result in agent.run(history, stream=False):
                    history += result.get("output", [])

                    # Print output for debugging
                    for item in result.get("output", []):
                        if item.get("type") == "message":
                            content = item.get("content", [])
                            for content_part in content:
                                if content_part.get("text"):
                                    logger.info(f"Agent: {content_part.get('text')}")
                        elif item.get("type") == "computer_call":
                            action = item.get("action", {})
                            action_type = action.get("type", "")
                            logger.debug(f"Computer Action: {action_type}")

                print(f"✅ Task {i}/{len(tasks)} completed")

            print("\\n🎉 All tasks completed successfully!")

    except Exception as e:
        logger.error(f"Error in fill_application: {e}")
        traceback.print_exc()
        raise

def main():
try:
load_dotenv()

        if "ANTHROPIC_API_KEY" not in os.environ:
            raise RuntimeError(
                "Please set the ANTHROPIC_API_KEY environment variable.\\n"
                "You can add it to a .env file in the project root."
            )

        if "CUA_API_KEY" not in os.environ:
            raise RuntimeError(
                "Please set the CUA_API_KEY environment variable.\\n"
                "You can add it to a .env file in the project root."
            )

        signal.signal(signal.SIGINT, handle_sigint)

        asyncio.run(fill_application())

    except Exception as e:
        logger.error(f"Error running automation: {e}")
        traceback.print_exc()

if **name** == "**main**":
main()`}

</EditableCodeBlock>

  </Tab>
  <Tab value="🍎 Lume">

<EditableCodeBlock
  key="lume-tab"
  lang="python"
  defaultValues={{
    "container-name": "macos-sequoia-cua:latest"
  }}
>
{`import asyncio
import logging
import os
import signal
import traceback

from agent import ComputerAgent
from computer import Computer, VMProviderType
from dotenv import load_dotenv

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(**name**)

def handle_sigint(sig, frame):
print("\\n\\nExecution interrupted by user. Exiting gracefully...")
exit(0)

async def fill_application():
try:
async with Computer(
os_type="macos",
provider_type=VMProviderType.LUME,
name="`}<EditableValue placeholder="container-name" />{`",
verbosity=logging.INFO,
) as computer:

            agent = ComputerAgent(
                model="anthropic/claude-3-5-sonnet-20241022",
                tools=[computer],
                only_n_most_recent_images=3,
                verbosity=logging.INFO,
                trajectory_dir="trajectories",
                use_prompt_caching=True,
                max_trajectory_budget=5.0,
            )

            tasks = [
                "Visit https://www.overleaf.com/latex/templates/jakes-resume/syzfjbzwjncs.pdf and download the pdf.",
                "Visit https://form.jotform.com/252881246782264 and fill the form from the information in the pdf."
            ]

            history = []

            for i, task in enumerate(tasks, 1):
                print(f"\\n[Task {i}/{len(tasks)}] {task}")

                # Add user message to history
                history.append({"role": "user", "content": task})

                # Run agent with conversation history
                async for result in agent.run(history, stream=False):
                    history += result.get("output", [])

                    # Print output for debugging
                    for item in result.get("output", []):
                        if item.get("type") == "message":
                            content = item.get("content", [])
                            for content_part in content:
                                if content_part.get("text"):
                                    logger.info(f"Agent: {content_part.get('text')}")
                        elif item.get("type") == "computer_call":
                            action = item.get("action", {})
                            action_type = action.get("type", "")
                            logger.debug(f"Computer Action: {action_type}")

                print(f"✅ Task {i}/{len(tasks)} completed")

            print("\\n🎉 All tasks completed successfully!")

    except Exception as e:
        logger.error(f"Error in fill_application: {e}")
        traceback.print_exc()
        raise

def main():
try:
load_dotenv()

        if "ANTHROPIC_API_KEY" not in os.environ:
            raise RuntimeError(
                "Please set the ANTHROPIC_API_KEY environment variable.\\n"
                "You can add it to a .env file in the project root."
            )

        signal.signal(signal.SIGINT, handle_sigint)

        asyncio.run(fill_application())

    except Exception as e:
        logger.error(f"Error running automation: {e}")
        traceback.print_exc()

if **name** == "**main**":
main()`}

</EditableCodeBlock>

  </Tab>
  <Tab value="🪟 Windows Sandbox">

<EditableCodeBlock
  key="windows-tab"
  lang="python"
  defaultValues={{}}
>
{`import asyncio
import logging
import os
import signal
import traceback

from agent import ComputerAgent
from computer import Computer, VMProviderType
from dotenv import load_dotenv

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(**name**)

def handle_sigint(sig, frame):
print("\\n\\nExecution interrupted by user. Exiting gracefully...")
exit(0)

async def fill_application():
try:
async with Computer(
os_type="windows",
provider_type=VMProviderType.WINDOWS_SANDBOX,
verbosity=logging.INFO,
) as computer:

            agent = ComputerAgent(
                model="anthropic/claude-3-5-sonnet-20241022",
                tools=[computer],
                only_n_most_recent_images=3,
                verbosity=logging.INFO,
                trajectory_dir="trajectories",
                use_prompt_caching=True,
                max_trajectory_budget=5.0,
            )

            tasks = [
                "Visit https://www.overleaf.com/latex/templates/jakes-resume/syzfjbzwjncs.pdf and download the pdf.",
                "Visit https://form.jotform.com/252881246782264 and fill the form from the information in the pdf."
            ]

            history = []

            for i, task in enumerate(tasks, 1):
                print(f"\\n[Task {i}/{len(tasks)}] {task}")

                # Add user message to history
                history.append({"role": "user", "content": task})

                # Run agent with conversation history
                async for result in agent.run(history, stream=False):
                    history += result.get("output", [])

                    # Print output for debugging
                    for item in result.get("output", []):
                        if item.get("type") == "message":
                            content = item.get("content", [])
                            for content_part in content:
                                if content_part.get("text"):
                                    logger.info(f"Agent: {content_part.get('text')}")
                        elif item.get("type") == "computer_call":
                            action = item.get("action", {})
                            action_type = action.get("type", "")
                            logger.debug(f"Computer Action: {action_type}")

                print(f"✅ Task {i}/{len(tasks)} completed")

            print("\\n🎉 All tasks completed successfully!")

    except Exception as e:
        logger.error(f"Error in fill_application: {e}")
        traceback.print_exc()
        raise

def main():
try:
load_dotenv()

        if "ANTHROPIC_API_KEY" not in os.environ:
            raise RuntimeError(
                "Please set the ANTHROPIC_API_KEY environment variable.\\n"
                "You can add it to a .env file in the project root."
            )

        signal.signal(signal.SIGINT, handle_sigint)

        asyncio.run(fill_application())

    except Exception as e:
        logger.error(f"Error running automation: {e}")
        traceback.print_exc()

if **name** == "**main**":
main()`}

</EditableCodeBlock>

  </Tab>
  <Tab value="🐳 Docker">

<EditableCodeBlock
  key="docker-tab"
  lang="python"
  defaultValues={{
    "container-name": "trycua/cua-ubuntu:latest"
  }}
>
{`import asyncio
import logging
import os
import signal
import traceback

from agent import ComputerAgent
from computer import Computer, VMProviderType
from dotenv import load_dotenv

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(**name**)

def handle_sigint(sig, frame):
print("\\n\\nExecution interrupted by user. Exiting gracefully...")
exit(0)

async def fill_application():
try:
async with Computer(
os_type="linux",
provider_type=VMProviderType.DOCKER,
name="`}<EditableValue placeholder="container-name" />{`",
verbosity=logging.INFO,
) as computer:

            agent = ComputerAgent(
                model="anthropic/claude-3-5-sonnet-20241022",
                tools=[computer],
                only_n_most_recent_images=3,
                verbosity=logging.INFO,
                trajectory_dir="trajectories",
                use_prompt_caching=True,
                max_trajectory_budget=5.0,
            )

            tasks = [
                "Visit https://www.overleaf.com/latex/templates/jakes-resume/syzfjbzwjncs.pdf and download the pdf.",
                "Visit https://form.jotform.com/252881246782264 and fill the form from the information in the pdf."
            ]

            history = []

            for i, task in enumerate(tasks, 1):
                print(f"\\n[Task {i}/{len(tasks)}] {task}")

                # Add user message to history
                history.append({"role": "user", "content": task})

                # Run agent with conversation history
                async for result in agent.run(history, stream=False):
                    history += result.get("output", [])

                    # Print output for debugging
                    for item in result.get("output", []):
                        if item.get("type") == "message":
                            content = item.get("content", [])
                            for content_part in content:
                                if content_part.get("text"):
                                    logger.info(f"Agent: {content_part.get('text')}")
                        elif item.get("type") == "computer_call":
                            action = item.get("action", {})
                            action_type = action.get("type", "")
                            logger.debug(f"Computer Action: {action_type}")

                print(f"✅ Task {i}/{len(tasks)} completed")

            print("\\n🎉 All tasks completed successfully!")

    except Exception as e:
        logger.error(f"Error in fill_application: {e}")
        traceback.print_exc()
        raise

def main():
try:
load_dotenv()

        if "ANTHROPIC_API_KEY" not in os.environ:
            raise RuntimeError(
                "Please set the ANTHROPIC_API_KEY environment variable.\\n"
                "You can add it to a .env file in the project root."
            )

        signal.signal(signal.SIGINT, handle_sigint)

        asyncio.run(fill_application())

    except Exception as e:
        logger.error(f"Error running automation: {e}")
        traceback.print_exc()

if **name** == "**main**":
main()`}

</EditableCodeBlock>

  </Tab>
</Tabs>

## Next Steps

- Learn more about [Cua computers](/computer-sdk/computers) and [computer commands](/computer-sdk/commands)
- Read about [Agent loops](/agent-sdk/agent-loops), [tools](/agent-sdk/custom-tools), and [supported model providers](/agent-sdk/supported-model-providers/)
- Experiment with different [Models and Providers](/agent-sdk/supported-model-providers/)
